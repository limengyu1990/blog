<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="google-site-verification" content="xBT4GhYoi5qRD5tr338pgPM5OWHHIDR6mNg1a3euekI" />
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">
    <meta name="keyword"  content="">
    <link rel="shortcut icon" href="/blog/img/favicon.ico">

    <title>
        
        Haskell-Mathematics - undefined
        
    </title>

    <!-- Custom CSS -->
    <link rel="stylesheet" href="/blog/css/aircloud.css">
    <link rel="stylesheet" href="/blog/css/gitment.css">
    <!--<link rel="stylesheet" href="https://imsun.github.io/gitment/style/default.css">-->
    <link href="//at.alicdn.com/t/font_620856_pl6z7sid89qkt9.css" rel="stylesheet" type="text/css">
    <!-- ga & ba script hoook -->
    <script></script>
</head>

<body>

<div class="site-nav-toggle" id="site-nav-toggle">
    <button>
        <span class="btn-bar"></span>
        <span class="btn-bar"></span>
        <span class="btn-bar"></span>
    </button>
</div>

<div class="index-about">
    <i> 不会Haskell的Scala写不出好的JavaScript。 </i>
</div>

<div class="index-container">
    
    <div class="index-left">
        
<div class="nav" id="nav">
    <div class="avatar-name">
        <div class="avatar">
            <img src="/blog/img/photo.png" />
        </div>
        <div class="name">
            <i>不负如来不负卿</i>
        </div>
    </div>
    <div class="contents" id="nav-content">
        <ul>
            <li >
                <a href="/blog/">
                    <i class="iconfont icon-shouye1"></i>
                    <span>主页</span>
                </a>
            </li>
            <li >
                <a href="/blog/tags">
                    <i class="iconfont icon-biaoqian1"></i>
                    <span>标签</span>
                </a>
            </li>
            <li >
                <a href="/blog/archive">
                    <i class="iconfont icon-guidang2"></i>
                    <span>存档</span>
                </a>
            </li>
            <li >
                <a href="/blog/about/">
                    <i class="iconfont icon-guanyu2"></i>
                    <span>关于</span>
                </a>
            </li>
            
            <li>
                <a id="search">
                    <i class="iconfont icon-sousuo1"></i>
                    <span>搜索</span>
                </a>
            </li>
            
        </ul>
    </div>
    
        <div id="toc" class="toc-article">
    <ol class="toc"><li class="toc-item toc-level-3"><a class="toc-link" href="#Numeric-Tower-数值塔"><span class="toc-text">Numeric Tower(数值塔)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Integer"><span class="toc-text">Integer</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Complex"><span class="toc-text">Complex</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Scientific"><span class="toc-text">Scientific</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Statistics-统计"><span class="toc-text">Statistics(统计)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Constructive-Reals-建设性领域"><span class="toc-text">Constructive Reals(建设性领域)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#SAT-Solvers"><span class="toc-text">SAT Solvers</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#SMT-Solvers"><span class="toc-text">SMT Solvers</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Z3"><span class="toc-text">Z3</span></a></li></ol>
</div>
    
</div>


<div class="search-field" id="search-field">
    <div class="search-container">
        <div class="search-input">
            <span id="esc-search"> <i class="icon-fanhui iconfont"></i></span>
            <input id="search-input"/>
            <span id="begin-search">搜索</span>
        </div>
        <div class="search-result-container" id="search-result-container">

        </div>
    </div>
</div>
        <div class="index-about-mobile">
            <i> 不会Haskell的Scala写不出好的JavaScript。 </i>
        </div>
    </div>
    
    <div class="index-middle">
        <!-- Main Content -->
        


<div class="post-container">
    <div class="post-title">
        Haskell-Mathematics
    </div>

    <div class="post-meta">
        <span class="attr">发布于：<span>2019-10-16 19:29:33</span></span>
        
        <span class="attr">标签：/
        
        <a class="tag" href="/blog/tags/#Wish-Knew" title="Wish-Knew">Wish-Knew</a>
        <span>/</span>
        
        <a class="tag" href="/blog/tags/#Haskell" title="Haskell">Haskell</a>
        <span>/</span>
        
        <a class="tag" href="/blog/tags/#Mathematics" title="Mathematics">Mathematics</a>
        <span>/</span>
        
        
        </span>
        <span class="attr">访问：<span id="busuanzi_value_page_pv"></span>
</span>
</span>
    </div>
    <div class="post-content ">
        <blockquote>
<p><a href="http://dev.stephendiehl.com/hask/#mathematics" target="_blank" rel="noopener">原文</a></p>
</blockquote>
<h3 id="Numeric-Tower-数值塔"><a href="#Numeric-Tower-数值塔" class="headerlink" title="Numeric Tower(数值塔)"></a>Numeric Tower(数值塔)</h3><p><code>Haskell</code>的数值塔是不寻常的，对于新手来说，这是一些困惑的根源。</p>
<p><code>Haskell</code>是少数几种包含静态类型的重载<code>literals</code>(文字)而没有其他语言中常见的<code>coercions</code>(强制)机制的语言之一。</p>
<p>更令人困惑的是，<code>Haskell</code>中的<code>numerical literals</code>(数值文字)被从<code>numeric</code>类型类分解为一个函数，该函数产生一个多态值，该值可以在<code>call-site</code>(调用站点)实例化为<code>Num</code>或<code>Fractional</code>类型类的任何实例，取决于推断的类型。</p>
<p>用一个直白的比喻，我们实际上是将对象放置在孔中，并且孔的大小和形状限定了放置在孔中的对象。这与其他语言非常不同，在其他语言中，像<code>2.718</code>这样的数字文字在编译器中被硬编码为特定类型(<code>double</code>或<code>something</code>)，并且在运行时根据需要将該值强制转换为更小的值或更大的值。<br><figure class="highlight haskell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">42</span> :: <span class="type">Num</span> a =&gt; a</span><br><span class="line"><span class="title">fromInteger</span> (<span class="number">42</span> :: <span class="type">Integer</span>)</span><br><span class="line"></span><br><span class="line"><span class="number">2.71</span> :: <span class="type">Fractional</span> a =&gt; a</span><br><span class="line"><span class="title">fromRational</span> (<span class="number">2.71</span> :: <span class="type">Rational</span>)</span><br></pre></td></tr></table></figure></p>
<p><code>numeric</code>(数值)类型类层次结构的定义如下:<br><figure class="highlight haskell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="type">Num</span> a</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> (<span class="type">Num</span> <span class="title">a</span>, <span class="type">Ord</span> <span class="title">a</span>) =&gt; <span class="type">Real</span> a</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="type">Num</span> a =&gt; <span class="type">Fractional</span> a</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> (<span class="type">Real</span> <span class="title">a</span>, <span class="type">Enum</span> <span class="title">a</span>) =&gt; <span class="type">Integral</span> a</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> (<span class="type">Real</span> <span class="title">a</span>, <span class="type">Fractional</span> <span class="title">a</span>) =&gt; <span class="type">RealFrac</span> a</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="type">Fractional</span> a =&gt; <span class="type">Floating</span> a</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> (<span class="type">RealFrac</span> <span class="title">a</span>, <span class="type">Floating</span> <span class="title">a</span>) =&gt; <span class="type">RealFloat</span> a</span></span><br></pre></td></tr></table></figure></p>
<p><img src="img/img01.png" alt=""></p>
<p>具体的数字类型(<code>from</code>: 左列 <code>to</code>: 顶行)之间的转换是通过几个通用函数完成的。</p>
<p><img src="img/img02.png" alt=""></p>
<h3 id="Integer"><a href="#Integer" class="headerlink" title="Integer"></a>Integer</h3><p><code>GHC</code>中的<code>Integer</code>类型由<code>GMP</code>(<code>libgmp</code>)任意精度算术库实现。<br>与<code>Int</code>类型不同，<code>Integer</code>值的大小仅受可用内存的限制。</p>
<p>最值得注意的是，<code>libgmp</code>是动态链接已编译<code>Haskell</code>二进制文件的少数几个库之一。</p>
<p><code>integer-simple</code>是一個可選的库，它可链接，可以用來代替<code>libgmp</code>。</p>
<p>請看:</p>
<ul>
<li><a href="http://www.well-typed.com/blog/32/" target="_blank" rel="noopener">GHC, primops and exorcising GMP</a></li>
</ul>
<h3 id="Complex"><a href="#Complex" class="headerlink" title="Complex"></a>Complex</h3><p><code>Haskell</code>支持通过<code>Data.Complex</code>模块中的<code>Complex</code>数据类型使用复数进行算术运算。</p>
<p>第一个参数是实部，第二个参数是虚部。</p>
<p>该类型具有单个参数，并从该参数的类型继承其<code>numerical</code>(数值)类型类组件(<code>Num</code>, <code>Fractional</code>, <code>Floating</code>)。</p>
<figure class="highlight haskell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 1 + 2i</span></span><br><span class="line"><span class="title">let</span> complex = <span class="number">1</span> :+ <span class="number">2</span></span><br><span class="line"><span class="class"><span class="keyword">data</span> <span class="type">Complex</span> a = a :+ a</span></span><br><span class="line"><span class="title">mkPolar</span> :: <span class="type">RealFloat</span> a =&gt; a -&gt; a -&gt; <span class="type">Complex</span> a</span><br></pre></td></tr></table></figure>
<p>仅当<code>Complex</code>的参数是<code>RealFloat</code>的实例时，才定义<code>Complex</code>的<code>Num</code>实例。<br><figure class="highlight haskell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">λ: <span class="number">0</span> :+ <span class="number">1</span></span><br><span class="line"><span class="number">0</span> :+ <span class="number">1</span> :: <span class="type">Complex</span> <span class="type">Integer</span></span><br><span class="line"></span><br><span class="line">λ: (<span class="number">0</span> :+ <span class="number">1</span>) + (<span class="number">1</span> :+ <span class="number">0</span>)</span><br><span class="line"><span class="number">1.0</span> :+ <span class="number">1.0</span> :: <span class="type">Complex</span> <span class="type">Integer</span></span><br><span class="line"></span><br><span class="line">λ: exp (<span class="number">0</span> :+ <span class="number">2</span> * pi)</span><br><span class="line"><span class="number">1.0</span> :+ (<span class="number">-2.4492935982947064e-16</span>) :: <span class="type">Complex</span> <span class="type">Double</span></span><br><span class="line"></span><br><span class="line">λ: mkPolar <span class="number">1</span> (<span class="number">2</span>*pi)</span><br><span class="line"><span class="number">1.0</span> :+ (<span class="number">-2.4492935982947064e-16</span>) :: <span class="type">Complex</span> <span class="type">Double</span></span><br><span class="line"></span><br><span class="line">λ: <span class="keyword">let</span> f x n = (cos x :+ sin x)^n</span><br><span class="line">λ: <span class="keyword">let</span> g x n = cos (n*x) :+ sin (n*x)</span><br></pre></td></tr></table></figure></p>
<h3 id="Scientific"><a href="#Scientific" class="headerlink" title="Scientific"></a>Scientific</h3><p><code>Scientific</code>提供使用科学计数法表示的任意精度数字。构造函数采用任意大小的<code>Integer</code>参数表示数字，并使用<code>Int</code>表示指数。另外，该值可以从字符串中解析，也可以从<code>Double</code>/<code>Float</code>中强制转换。<br><figure class="highlight haskell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="title">scientific</span> :: <span class="type">Integer</span> -&gt; <span class="type">Int</span> -&gt; <span class="type">Scientific</span></span><br><span class="line"><span class="title">fromFloatDigits</span> :: <span class="type">RealFloat</span> a =&gt; a -&gt; <span class="type">Scientific</span></span><br><span class="line"><span class="keyword">import</span> Data.Scientific</span><br><span class="line"></span><br><span class="line"><span class="title">c</span>, h, g, a, k :: <span class="type">Scientific</span></span><br><span class="line"><span class="title">c</span> = scientific <span class="number">299792458</span> (<span class="number">0</span>)   <span class="comment">-- 光速</span></span><br><span class="line"><span class="title">h</span> = scientific <span class="number">662606957</span> (<span class="number">-42</span>) <span class="comment">-- 普朗克常数</span></span><br><span class="line"><span class="title">g</span> = scientific <span class="number">667384</span>    (<span class="number">-16</span>) <span class="comment">-- 引力常数</span></span><br><span class="line"><span class="title">a</span> = scientific <span class="number">729735257</span> (<span class="number">-11</span>) <span class="comment">-- 优良的结构常数</span></span><br><span class="line"><span class="title">k</span> = scientific <span class="number">268545200</span> (<span class="number">-9</span>)  <span class="comment">-- Khinchin常数</span></span><br><span class="line"></span><br><span class="line"><span class="title">tau</span> :: <span class="type">Scientific</span></span><br><span class="line"><span class="title">tau</span> = fromFloatDigits (<span class="number">2</span>*pi)</span><br><span class="line"></span><br><span class="line"><span class="title">maxDouble64</span> :: <span class="type">Double</span></span><br><span class="line"><span class="title">maxDouble64</span> = read <span class="string">"1.7976931348623159e308"</span></span><br><span class="line"><span class="comment">-- Infinity 无穷</span></span><br><span class="line"></span><br><span class="line"><span class="title">maxScientific</span> :: <span class="type">Scientific</span></span><br><span class="line"><span class="title">maxScientific</span> = read <span class="string">"1.7976931348623159e308"</span></span><br><span class="line"><span class="comment">-- 1.7976931348623159e308</span></span><br></pre></td></tr></table></figure></p>
<h3 id="Statistics-统计"><a href="#Statistics-统计" class="headerlink" title="Statistics(统计)"></a>Statistics(统计)</h3><figure class="highlight haskell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> Data.Vector</span><br><span class="line"><span class="keyword">import</span> Statistics.Sample</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> Statistics.Distribution.Normal</span><br><span class="line"><span class="keyword">import</span> Statistics.Distribution.Poisson</span><br><span class="line"><span class="keyword">import</span> <span class="keyword">qualified</span> Statistics.Distribution <span class="keyword">as</span> S</span><br><span class="line"></span><br><span class="line"><span class="title">s1</span> :: <span class="type">Vector</span> <span class="type">Double</span></span><br><span class="line"><span class="title">s1</span> = fromList [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>, <span class="number">9</span>, <span class="number">10</span>]</span><br><span class="line"></span><br><span class="line"><span class="title">s2</span> :: <span class="type">PoissonDistribution</span></span><br><span class="line"><span class="title">s2</span> = poisson <span class="number">2.5</span></span><br><span class="line"></span><br><span class="line"><span class="title">s3</span> :: <span class="type">NormalDistribution</span></span><br><span class="line"><span class="title">s3</span> = normalDistr mean stdDev</span><br><span class="line">  <span class="keyword">where</span></span><br><span class="line">    mean   = <span class="number">1</span></span><br><span class="line">    stdDev = <span class="number">1</span></span><br><span class="line"></span><br><span class="line"><span class="title">descriptive</span> = <span class="keyword">do</span></span><br><span class="line">  print $ range s1</span><br><span class="line">  <span class="comment">-- 9.0</span></span><br><span class="line">  print $ mean s1</span><br><span class="line">  <span class="comment">-- 5.5</span></span><br><span class="line">  print $ stdDev s1</span><br><span class="line">  <span class="comment">-- 3.0276503540974917</span></span><br><span class="line">  print $ variance s1</span><br><span class="line">  <span class="comment">-- 8.25</span></span><br><span class="line">  print $ harmonicMean s1</span><br><span class="line">  <span class="comment">-- 3.414171521474055</span></span><br><span class="line">  print $ geometricMean s1</span><br><span class="line">  <span class="comment">-- 4.5287286881167645</span></span><br><span class="line"></span><br><span class="line"><span class="title">discrete</span> = <span class="keyword">do</span></span><br><span class="line">  print $ <span class="type">S</span>.cumulative s2 <span class="number">0</span></span><br><span class="line">  <span class="comment">-- 8.208499862389884e-2</span></span><br><span class="line">  print $ <span class="type">S</span>.mean s2</span><br><span class="line">  <span class="comment">-- 2.5</span></span><br><span class="line">  print $ <span class="type">S</span>.variance s2</span><br><span class="line">  <span class="comment">-- 2.5</span></span><br><span class="line">  print $ <span class="type">S</span>.stdDev s2</span><br><span class="line">  <span class="comment">-- 1.5811388300841898</span></span><br><span class="line"></span><br><span class="line"><span class="title">continuous</span> = <span class="keyword">do</span></span><br><span class="line">  print $ <span class="type">S</span>.cumulative s3 <span class="number">0</span></span><br><span class="line">  <span class="comment">-- 0.15865525393145707</span></span><br><span class="line">  print $ <span class="type">S</span>.quantile s3 <span class="number">0.5</span></span><br><span class="line">  <span class="comment">-- 1.0</span></span><br><span class="line">  print $ <span class="type">S</span>.density s3 <span class="number">0</span></span><br><span class="line">  <span class="comment">-- 0.24197072451914334</span></span><br><span class="line">  print $ <span class="type">S</span>.mean s3</span><br><span class="line">  <span class="comment">-- 1.0</span></span><br><span class="line">  print $ <span class="type">S</span>.variance s3</span><br><span class="line">  <span class="comment">-- 1.0</span></span><br><span class="line">  print $ <span class="type">S</span>.stdDev s3</span><br><span class="line">  <span class="comment">-- 1.0</span></span><br></pre></td></tr></table></figure>
<h3 id="Constructive-Reals-建设性领域"><a href="#Constructive-Reals-建设性领域" class="headerlink" title="Constructive Reals(建设性领域)"></a>Constructive Reals(建设性领域)</h3><p>除了使用有限精度浮点数对实数建模之外，我们还可以使用<code>Num</code>运算，当执行算术或超越函数之类的运算时，该运算符在内部操作表达式的幂级数展开，而在执行中间计算时不会失去精度。</p>
<p>然后，我们简单地切出固定数量的项，并将结果数近似为所需的精度。这种方法并非没有局限和警告, 特别是它可能会出现<code>diverge</code>(分歧)。<br><figure class="highlight haskell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="title">exp</span>(x)    = <span class="number">1</span> + x + <span class="number">1</span>/<span class="number">2</span>*x^<span class="number">2</span> + <span class="number">1</span>/<span class="number">6</span>*x^<span class="number">3</span> + <span class="number">1</span>/<span class="number">24</span>*x^<span class="number">4</span> + <span class="number">1</span>/<span class="number">120</span>*x^<span class="number">5</span> ...</span><br><span class="line"><span class="title">sqrt</span>(<span class="number">1</span>+x) = <span class="number">1</span> + <span class="number">1</span>/<span class="number">2</span>*x - <span class="number">1</span>/<span class="number">8</span>*x^<span class="number">2</span> + <span class="number">1</span>/<span class="number">16</span>*x^<span class="number">3</span> - <span class="number">5</span>/<span class="number">128</span>*x^<span class="number">4</span> + <span class="number">7</span>/<span class="number">256</span>*x^<span class="number">5</span> ...</span><br><span class="line"><span class="title">atan</span>(x)   = x - <span class="number">1</span>/<span class="number">3</span>*x^<span class="number">3</span> + <span class="number">1</span>/<span class="number">5</span>*x^<span class="number">5</span> - <span class="number">1</span>/<span class="number">7</span>*x^<span class="number">7</span> + <span class="number">1</span>/<span class="number">9</span>*x^<span class="number">9</span> - <span class="number">1</span>/<span class="number">11</span>*x^<span class="number">11</span> ...</span><br><span class="line"><span class="title">pi</span>        = <span class="number">16</span> * atan (<span class="number">1</span>/<span class="number">5</span>) - <span class="number">4</span> * atan (<span class="number">1</span>/<span class="number">239</span>)</span><br><span class="line"><span class="keyword">import</span> Data.Number.CReal</span><br><span class="line"></span><br><span class="line"><span class="comment">-- algebraic</span></span><br><span class="line"><span class="title">phi</span> :: <span class="type">CReal</span></span><br><span class="line"><span class="title">phi</span> = (<span class="number">1</span> + sqrt <span class="number">5</span>) / <span class="number">2</span></span><br><span class="line"></span><br><span class="line"><span class="comment">-- transcendental</span></span><br><span class="line"><span class="title">ramanujan</span> :: <span class="type">CReal</span></span><br><span class="line"><span class="title">ramanujan</span> = exp (pi * sqrt <span class="number">163</span>)</span><br><span class="line"></span><br><span class="line"><span class="title">main</span> :: <span class="type">IO</span> ()</span><br><span class="line"><span class="title">main</span> = <span class="keyword">do</span></span><br><span class="line">  putStrLn $ showCReal <span class="number">30</span> pi</span><br><span class="line">  <span class="comment">-- 3.141592653589793238462643383279</span></span><br><span class="line">  putStrLn $ showCReal <span class="number">30</span> phi</span><br><span class="line">  <span class="comment">-- 1.618033988749894848204586834366</span></span><br><span class="line">  putStrLn $ showCReal <span class="number">15</span> ramanujan</span><br><span class="line">  <span class="comment">-- 262537412640768743.99999999999925</span></span><br></pre></td></tr></table></figure></p>
<h3 id="SAT-Solvers"><a href="#SAT-Solvers" class="headerlink" title="SAT Solvers"></a>SAT Solvers</h3><p>一组称为可满足性问题的约束问题出现在从类型检查到包管理的许多不同学科中。简单地说，一个可满足性问题试图从一系列变量中找到<code>conjunctions</code>(连词)和<code>disjunctions</code>(析词)的解。例如:<br><figure class="highlight haskell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">(<span class="type">A</span> v ¬<span class="type">B</span> v <span class="type">C</span>) ∧ (<span class="type">B</span> v <span class="type">D</span> v <span class="type">E</span>) ∧ (<span class="type">D</span> v <span class="type">F</span>)</span><br></pre></td></tr></table></figure></p>
<p>要使用<code>picosat</code>库解决此问题，可以将其写入<code>zero-terminated</code>整数列表，并根据数与变量的关系<code>fed to</code>(喂給)求解器:<br><figure class="highlight haskell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1</span> <span class="number">-2</span> <span class="number">3</span>  <span class="comment">-- (A v ¬B v C)</span></span><br><span class="line"><span class="number">2</span> <span class="number">4</span> <span class="number">5</span>   <span class="comment">-- (B v D v E)</span></span><br><span class="line"><span class="number">4</span> <span class="number">6</span>     <span class="comment">-- (D v F)</span></span><br><span class="line"><span class="keyword">import</span> Picosat</span><br><span class="line"></span><br><span class="line"><span class="title">main</span> :: <span class="type">IO</span> [<span class="type">Int</span>]</span><br><span class="line"><span class="title">main</span> = <span class="keyword">do</span></span><br><span class="line">  solve [[<span class="number">1</span>, <span class="number">-2</span>, <span class="number">3</span>], [<span class="number">2</span>,<span class="number">4</span>,<span class="number">5</span>], [<span class="number">4</span>,<span class="number">6</span>]]</span><br><span class="line">  <span class="comment">-- Solution [1,-2,3,4,5,6]</span></span><br></pre></td></tr></table></figure></p>
<p><code>SAT</code>求解器本身可以用来解决以这种形式存在的数以百万计的变量的可满足性问题，并且经过微调。</p>
<p>請看:</p>
<ul>
<li><a href="http://hackage.haskell.org/package/picosat-0.1.1" target="_blank" rel="noopener">picosat</a></li>
</ul>
<h3 id="SMT-Solvers"><a href="#SMT-Solvers" class="headerlink" title="SMT Solvers"></a>SMT Solvers</h3><p>将<code>SAT</code>问题推广到包含谓词的其他理论中，就产生了非常复杂的<code>Satisfiability Modulo Theory</code>(可满足性模理论)问题。<br>现有的<code>SMT</code>求解器是非常复杂的项目(通常由大型机构提供资金)，通常必须通过外部函數接口或称为<code>SMT-lib</code>的通用接口来调用。</p>
<p><code>Haskell</code>中最常用的两个是斯坦福大学的<code>cvc4</code>和微软研究院的<code>z3</code>。</p>
<p>作为一个例子，下面是如何解决一个简单的<a href="https://en.wikipedia.org/wiki/Verbal_arithmetic" target="_blank" rel="noopener">cryptarithm</a>(密码算法):<br><figure class="highlight haskell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">M</span> <span class="type">O</span> <span class="type">N</span> <span class="type">A</span> <span class="type">D</span></span><br><span class="line">+ <span class="type">B</span> <span class="type">U</span> <span class="type">R</span> <span class="type">R</span> <span class="type">I</span> <span class="type">T</span> <span class="type">O</span></span><br><span class="line">= <span class="type">B</span> <span class="type">A</span> <span class="type">N</span> <span class="type">D</span> <span class="type">A</span> <span class="type">I</span> <span class="type">D</span></span><br></pre></td></tr></table></figure></p>
<p>使用<code>SBV</code>庫:<br><figure class="highlight haskell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> Data.Foldable</span><br><span class="line"><span class="keyword">import</span> Data.SBV</span><br><span class="line"></span><br><span class="line"><span class="comment">-- | val [4,2] == 42</span></span><br><span class="line"><span class="title">val</span> :: [<span class="type">SInteger</span>] -&gt; <span class="type">SInteger</span></span><br><span class="line"><span class="title">val</span> = foldr1 (\d r -&gt; d + <span class="number">10</span>*r) . reverse</span><br><span class="line"></span><br><span class="line"><span class="title">puzzle</span> :: <span class="type">Symbolic</span> <span class="type">SBool</span></span><br><span class="line"><span class="title">puzzle</span> = <span class="keyword">do</span></span><br><span class="line">  ds@[b,u,r,i,t,o,m,n,a,d] &lt;- sequenceA [ sInteger [v] | v &lt;- <span class="string">"buritomnad"</span> ]</span><br><span class="line">  constrain $ allDifferent ds</span><br><span class="line">  for_ ds $ \d -&gt; constrain $ inRange d (<span class="number">0</span>,<span class="number">9</span>)</span><br><span class="line">  pure $    val [b,u,r,r,i,t,o]</span><br><span class="line">          + val     [m,o,n,a,d]</span><br><span class="line">        .== val [b,a,n,d,a,i,d]</span><br></pre></td></tr></table></figure></p>
<p>让我们看一下所有可能的解决方案:<br><figure class="highlight haskell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">λ: allSat puzzle</span><br><span class="line"><span class="type">Solution</span> #<span class="number">1</span>:</span><br><span class="line">  b = <span class="number">4</span> :: <span class="type">Integer</span></span><br><span class="line">  u = <span class="number">1</span> :: <span class="type">Integer</span></span><br><span class="line">  r = <span class="number">5</span> :: <span class="type">Integer</span></span><br><span class="line">  i = <span class="number">9</span> :: <span class="type">Integer</span></span><br><span class="line">  t = <span class="number">7</span> :: <span class="type">Integer</span></span><br><span class="line">  o = <span class="number">0</span> :: <span class="type">Integer</span></span><br><span class="line">  m = <span class="number">8</span> :: <span class="type">Integer</span></span><br><span class="line">  n = <span class="number">3</span> :: <span class="type">Integer</span></span><br><span class="line">  a = <span class="number">2</span> :: <span class="type">Integer</span></span><br><span class="line">  d = <span class="number">6</span> :: <span class="type">Integer</span></span><br><span class="line"><span class="type">This</span> is the only solution.这是唯一的解决方案。</span><br></pre></td></tr></table></figure></p>
<p>請看:</p>
<ul>
<li><a href="http://leventerkok.github.io/sbv/" target="_blank" rel="noopener">sbv</a></li>
<li><a href="http://cvc4.cs.nyu.edu/web/" target="_blank" rel="noopener">cvc4</a></li>
<li><a href="http://z3.codeplex.com/" target="_blank" rel="noopener">z3</a></li>
</ul>
<h3 id="Z3"><a href="#Z3" class="headerlink" title="Z3"></a>Z3</h3><blockquote>
<p>TODO</p>
</blockquote>
<p>請看:</p>
<ul>
<li><a href="https://hackage.haskell.org/package/z3" target="_blank" rel="noopener">z3</a></li>
</ul>

        
            <div class="donate-container">
    <div class="donate-button">
        <button id="donate-button">赞赏</button>
    </div>
    <div class="donate-img-container hide" id="donate-img-container">
        <img id="donate-img" src="" data-src="/blog/img/pay.png">
        <p> 感谢鼓励 </p>
    </div>
</div>
        
        <div id="comment-container">
        </div>
    </div>
</div>
    </div>
</div>


<footer class="footer">
    <ul class="list-inline text-center">
        
        

        

        

        

        

    </ul>
    
    <p>
        <span>/</span>
        
        <span><a href="https://medium.com/netflix-techblog">Netflix</a></span>
        <span>/</span>
        
        <span><a href="https://engineering.linkedin.com/blog">Linkedin</a></span>
        <span>/</span>
        
        <span><a href="https://blogs.dropbox.com/tech/">Dropbox</a></span>
        <span>/</span>
        
        <span><a href="https://code.fb.com/">Facebook</a></span>
        <span>/</span>
        
        <span><a href="https://www.fpcomplete.com/blog">FPComplete</a></span>
        <span>/</span>
        
        <span><a href="https://blog.janestreet.com/">JaneStreet</a></span>
        <span>/</span>
        
        <span><a href="https://github.com/limengyu1990/">Github</a></span>
        <span>/</span>
        
    </p>
    
    <p>
        <span id="busuanzi_container_site_pv">
            <span id="busuanzi_value_site_pv"></span>PV
        </span>
        <span id="busuanzi_container_site_uv">
            <span id="busuanzi_value_site_uv"></span>UV
        </span>
        Created By <a href="https://hexo.io/">Hexo</a>  Theme <a href="https://github.com/aircloud/hexo-theme-aircloud">AirCloud</a></p>
</footer>




</body>

<script>
    // We expose some of the variables needed by the front end
    window.hexo_search_path = "search.json"
    window.hexo_root = "/blog/"
    window.isPost = true
</script>
<script src="https://cdn.bootcss.com/jquery/3.3.1/jquery.min.js"></script>
<script src="https://github.com/bobcn/hexo_resize_image.js"></script>
<script src="/blog/js/index.js"></script>
<script async src="//dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js"></script>

<script src="/blog/js/gitment.js"></script>
<script>
    var gitment = new Gitment({
        id: 'Haskell-Mathematics',
        owner: 'limengyu1990',
        repo: 'hexo-blog',
        oauth: {
            client_id: '7cfc73dd62b57f07ed83',
            client_secret: 'dd03b7e54aadf0d81e4c9c93e23a41272bcfcfa1',
        },
    })
    gitment.render('comment-container')
</script>

</html>
